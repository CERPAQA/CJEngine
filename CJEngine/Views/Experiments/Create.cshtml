@model CJEngine.ViewModel.CreateExperimentViewModel;
@{
    ViewData["Title"] = "Create";
}

<h1>Create New Experiment</h1>

<hr />
<div class="row">
    <div class="col-md-4">

        <form asp-action="Create">
            <!--<div asp-validation-summary="ModelOnly" class="text-danger"></div>-->
            <div class="form-group">
                <label asp-for="Experiment.Name" class="control-label"></label>
                <input asp-for="Experiment.Name" class="form-control" />
                <span asp-validation-for="Experiment.Name" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Experiment.Description" class="control-label"></label>
                <input asp-for="Experiment.Description" class="form-control" />
                <span asp-validation-for="Experiment.Description" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Experiment.ExperimentParameters" class="control-label"></label>
                <select name="Parameters" onchange="java_script_:show(this.options[this.selectedIndex].value)"
                        asp-for="Experiment.ExperimentParameters" class="form-control">
                    <option value="New">Create New</option>
                    @foreach (var item in Model.ExperimentParametersList)
                    {
                        <option>@item.Description</option>
                    }
                </select>
                <button type="button" class="btn-secondary" data-toggle="modal" data-target="#parameters"> Create new</button>
            </div>

            <div>
                <br />
                <partial name="~/Views/Artefacts/_IndexArtefacts.cshtml" />
            </div>

            <div>
                <br />
                <partial name="~/Views/Judges/_IndexJudges.cshtml" />
            </div>

            <div class="form-group">
                <input type="submit" value="Create Experiment" class="btn btn-primary" />
            </div>
        </form>
        <div class="modal" id="parameters">
            <partial name="~/Views/ExperimentParameters/_CreateParams.cshtml" />
        </div>
    </div>
</div>

<div>
    <a asp-action="Index">Back to List</a>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

<script type="text/javascript">
    function show(val) {
        if (val == "New") {
            parameters.style.display= 'inline-block';
        }
        else {
            parameters.style.display = 'none';
        }
    }

    function ShowPopup(val) {
        if (val == "New") {
            //$find("mpe").show();
            parameters.style.display = 'inline-block';
        }
        else {
            parameters.style.display = 'none';
        }
        return false;
    }
</script>
